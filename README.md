# CypTrade - FreqTrad Configuration

Ce projet configure FreqTrad pour le trading algorithmique avec des strat√©gies personnalis√©es et une interface web compl√®te.

## üöÄ Installation Rapide

### Installation Locale (macOS/Linux)

```bash
# 1. Cloner le projet
git clone <repository-url>
cd cypTrade

# 2. Cr√©er l'environnement virtuel
python3 -m venv venv
source venv/bin/activate

# 3. Installer FreqTrad (sans utiliser /tmp)
mkdir -p ~/.pip-temp
export TMPDIR="$HOME/.pip-temp"
export TEMP="$HOME/.pip-temp"
export TMP="$HOME/.pip-temp"

pip install freqtrade --no-cache-dir

# 4. Installer l'interface web (OBLIGATOIRE)
freqtrade install-ui

# 5. Configurer les variables d'environnement
cp .env.example .env
# √âditer .env avec vos cl√©s API
```

### Installation Automatique

```bash
# Rendre le script ex√©cutable
chmod +x start-bot.sh

# D√©marrer le bot
./start-bot.sh
```

## ‚ö†Ô∏è IMPORTANT - Ordre d'Installation

**L'interface web FreqUI DOIT √™tre install√©e avant d'utiliser les scripts de trading !**

1. **D'abord** : Installer l'interface web avec `freqtrade install-ui`
2. **Ensuite** : Utiliser `start-bot.sh` ou `stop-bot.sh` pour trader
3. **Optionnel** : Utiliser `start-webserver.sh` pour l'interface web uniquement

## ‚öôÔ∏è Configuration

### 1. Variables d'Environnement

Cr√©ez un fichier `.env` avec vos cl√©s API :

```env
# FreqTrad Configuration
# Copy this file to .env and fill in your actual values

# Exchange API Keys
BINANCE_API_KEY=your_exchange_api_key_here
BINANCE_SECRET=your_exchange_secret_here

# Telegram Bot Configuration
TELEGRAM_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# API Server Configuration (optional)
API_USERNAME=your_api_username_here
API_PASSWORD=your_api_password_here
JWT_SECRET=your_jwt_secret_here

# Database
DATABASE_URL=sqlite:///tradesv3.sqlite

# Other settings
DRY_RUN=true

DOMAINE_NAME=example.com
```

### 2. Configuration Principale

Le fichier `config.json` est pr√©-configur√© avec :

- **√âchange** : Binance
- **Devise de base** : USDT
- **Mode** : Dry Run (simulation)
- **Timeframe** : 5 minutes
- **Paires** : BTC/USDT, ETH/USDT, BNB/USDT, ADA/USDT, SOL/USDT, DOT/USDT, LINK/USDT, MATIC/USDT
- **API Server** : Activ√© sur le port 8080
- **Interface Web** : FreqUI int√©gr√©e

Le fichier `config-usdt.json` contient une configuration √©tendue avec plus de paires USDT.

## Download data

```bash
freqtrade download-data --exchange binance --config config.json --timerange 20180101-20250131 --timeframe 1m 5m 1d 4h 1h
```

## üéØ Strat√©gies Disponibles

### 1. HyperoptWorking ‚≠ê (Recommand√©e)

**Strat√©gie optimis√©e pour l'hyperopt** - La plus performante du projet :

- **Param√®tres optimisables** : RSI, EMA, Volume, MACD
- **Hyperopt int√©gr√©** : Optimisation automatique des param√®tres
- **Performance** : 175 trades en 60 jours, Win Rate 31.4%
- **G√©n√®re des trades** : Contrairement aux autres strat√©gies simples
- **Facile √† utiliser** : Scripts d'optimisation pr√™ts √† l'emploi

**Utilisation :**

```bash
# Test rapide (10 epochs)
./test-hyperopt.sh

# Hyperopt standard (100 epochs)
./run-hyperopt.sh

# Hyperopt complet (500 epochs)
./run-hyperopt.sh --epochs 500

# Voir les r√©sultats
./show-hyperopt-results.sh

# Appliquer les meilleurs param√®tres
./apply-best-params.sh
```

#### Exemple de commande

```bash
freqtrade hyperopt \
  --config config.json \
  --hyperopt-loss MultiMetricHyperOptLoss \
  --strategy HyperoptWorking \
  --timerange 20240101-20241201 \
  -e 500 \
  --spaces buy sell roi \
  --min-trades 50
```

ou

```bash
freqtrade hyperopt \ 
  --config config.json \
  --hyperopt-loss MultiMetricHyperOptLoss \
  --strategy HyperoptWorking   \
  -e 100  \
  --spaces buy sel roi
```

## üñ•Ô∏è Interface Web

### D√©marrage de l'Interface

```bash
# D√©marrer FreqTrad avec l'interface web
./start-webserver.sh

# Ou manuellement
source venv/bin/activate
freqtrade trade --config config.json --strategy SampleStrategy
```

### Acc√®s √† l'Interface

- **URL** : <http://localhost:8080>
- **Identifiants** :
  - Utilisateur : `admin`
  - Mot de passe : `NouveauMotDePasse2025!`

### Fonctionnalit√©s de l'Interface

- üìä **Dashboard** : Vue d'ensemble du trading
- üìà **Graphiques** : Analyse technique en temps r√©el
- üîÑ **Backtesting** : Test des strat√©gies sur donn√©es historiques
- ‚öôÔ∏è **Configuration** : Gestion des param√®tres
- üì± **Notifications** : Alertes et rapports

## ü§ñ Gestion du Bot

### ‚ö†Ô∏è PR√âREQUIS OBLIGATOIRE

**Avant d'utiliser les scripts de trading, vous DEVEZ installer l'interface web :**

```bash
# 1. Activer l'environnement virtuel
source venv/bin/activate

# 2. Installer l'interface web FreqUI (OBLIGATOIRE)
freqtrade install-ui

# 3. Maintenant vous pouvez utiliser les scripts de trading
```

### Scripts de Contr√¥le du Bot

#### D√©marrage du Bot

```bash
# Mode interactif (recommand√©)
./start-bot.sh

# Mode avec arguments
./start-bot.sh SampleStrategy dry-run
./start-bot.sh PowerTowerStrategy live

# Aide
./start-bot.sh --help
```

**Fonctionnalit√©s du script `start-bot.sh` :**

- üéØ **Choix de strat√©gie** : Liste automatiquement toutes les strat√©gies disponibles
- üîÑ **Choix de mode** : Dry-run (simulation) ou Live (trading r√©el)
- ‚öôÔ∏è **Configuration dynamique** : Cr√©e une config sp√©cifique pour chaque combinaison
- üõ°Ô∏è **S√©curit√©** : Avertissements pour le mode live
- üîç **V√©rifications** : Contr√¥les complets avant d√©marrage

#### Arr√™t du Bot

```bash
# Arr√™t normal
./stop-bot.sh

# Arr√™t forc√©
./stop-bot.sh --force

# Voir le statut
./stop-bot.sh --status

# Voir les logs
./stop-bot.sh --logs

# Aide
./stop-bot.sh --help
```

**Fonctionnalit√©s du script `stop-bot.sh` :**

- üõë **Arr√™t propre** : Utilise SIGTERM par d√©faut, SIGKILL si forc√©
- üìä **Statut** : Affiche les processus FreqTrad en cours
- üìã **Logs** : Affiche les derniers logs
- üßπ **Nettoyage** : Supprime les fichiers temporaires et de verrouillage
- üìà **R√©sum√©** : Affiche un r√©sum√© de l'√©tat du syst√®me

### Exemples d'Utilisation

```bash
# 1. D'ABORD : Installer l'interface web
source venv/bin/activate
freqtrade install-ui

# 2. ENSUITE : Utiliser les scripts de trading
./start-bot.sh
# Choisir la strat√©gie et le mode via l'interface

# Ou d√©marrage direct
./start-bot.sh SampleStrategy dry-run
./start-bot.sh PowerTowerStrategy live

# V√©rifier le statut
./stop-bot.sh --status

# Arr√™ter le bot
./stop-bot.sh

# Voir les logs
./stop-bot.sh --logs
```

## Scripts de Gestion

### Scripts Disponibles

#### Scripts de Trading

- **`start-bot.sh`** : D√©marre FreqTrad avec choix de strat√©gie et mode
- **`stop-bot.sh`** : Arr√™te FreqTrad proprement
- **`diagnose-trading.sh`** : Diagnostic des trades et logs

#### Scripts d'Optimisation

- **`test-hyperopt.sh`** : Test rapide de l'hyperopt (10 epochs)
- **`run-hyperopt.sh`** : Hyperopt standard (100 epochs)
- **`show-hyperopt-results.sh`** : Affiche les r√©sultats d'optimisation
- **`apply-best-params.sh`** : Applique les meilleurs param√®tres trouv√©s

#### Scripts de Backtesting

- **`test-backtest.sh`** : Test rapide de backtesting (10 jours)
- **`run-backtest.sh`** : Backtesting standard (1 mois)

## Exemple de backtest

```bash
freqtrade backtesting \
  --config config.json \
  --strategy HyperoptWorking \
  --timeframe 5m
```

### Utilisation des Scripts

```bash
# D√©marrer le bot avec choix interactif
./start-bot.sh

# Arr√™ter le bot
./stop-bot.sh

# Diagnostic des trades
./diagnose-trading.sh

# Hyperoptimisation
./test-hyperopt.sh
./run-hyperopt.sh
./show-hyperopt-results.sh
./apply-best-params.sh

# Backtesting
./test-backtest.sh
./run-backtest.sh
```

## üìä Utilisation

### Mode Dry Run (Recommand√© pour d√©buter)

```bash
# D√©marrer en mode simulation
source venv/bin/activate
freqtrade trade --config config.json --strategy SampleStrategy
```

### Backtesting

#### Utilisation des Scripts (Recommand√©)

```bash
# Test rapide (10 jours)
./test-backtest.sh

# Backtesting standard (1 mois)
./run-backtest.sh

#### Utilisation Manuelle

```bash
# Tester une strat√©gie sur des donn√©es historiques
freqtrade backtesting \
    --config config.json \
    --strategy HyperoptWorking \
    --timerange 20240901-20240910
```

### 2. Autres Strat√©gies Disponibles

- **HyperoptOptimized** : Strat√©gie avec param√®tres optimis√©s (g√©n√©r√©e automatiquement par `apply-best-params.sh`)
- **HyperoptSimple** : Strat√©gie simplifi√©e pour hyperopt
- **HyperoptStrategy** : Strat√©gie de base pour hyperopt
- **PowerTowerStrategy** : Strat√©gie alternative avec indicateurs multiples

**Utilisation des autres strat√©gies :**

```bash
# Tester une strat√©gie sp√©cifique
./test-backtest.sh PowerTowerStrategy

# Backtesting avec une strat√©gie
./run-backtest.sh HyperoptOptimized

# D√©marrer le bot avec une strat√©gie
./start-bot.sh PowerTowerStrategy
```

### Acc√®s Restreint

- **Local uniquement** : Changer `listen_ip_address` √† `"127.0.0.1"` dans `config.json`
- **Authentification** : Toujours activ√©e avec nom d'utilisateur et mot de passe
- **HTTPS** : Recommand√© pour la production

## üì± Notifications Telegram

### Configuration

1. Cr√©er un bot Telegram avec @BotFather
2. Ajouter le token dans `.env`
3. Activer Telegram dans `config.json` :

```json
"telegram": {
    "enabled": true,
    "token": "${TELEGRAM_TOKEN}",
    "chat_id": "${TELEGRAM_CHAT_ID}"
}
```

### Commandes Disponibles

- `/daily` - Performance du jour
- `/profit` - Profits actuels
- `/balance` - Solde du portefeuille
- `/trades` - Liste des trades r√©cents
- `/stats` - Statistiques de trading
- `/status` - Statut du bot

## üõ†Ô∏è D√©veloppement

### Cr√©er une Nouvelle Strat√©gie

1. Copier `SampleStrategy.py` vers un nouveau fichier
2. Renommer la classe
3. Modifier les param√®tres selon vos besoins
4. Tester avec le mode dry run

### Structure du Projet

cypTrade/
‚îú‚îÄ‚îÄ config.json                 # Configuration principale (USDT)
‚îú‚îÄ‚îÄ config-usdt.json           # Configuration USDT √©tendue
‚îú‚îÄ‚îÄ .env.example               # Variables d'environnement (template)
‚îú‚îÄ‚îÄ requirements.txt           # D√©pendances Python
‚îú‚îÄ‚îÄ README.md                  # Documentation du projet
‚îú‚îÄ‚îÄ start-bot.sh              # D√©marrer le bot
‚îú‚îÄ‚îÄ stop-bot.sh               # Arr√™ter le bot
‚îú‚îÄ‚îÄ diagnose-trading.sh       # Diagnostic des trades
‚îú‚îÄ‚îÄ run-hyperopt.sh           # Hyperoptimisation
‚îú‚îÄ‚îÄ test-hyperopt.sh          # Test hyperopt rapide
‚îú‚îÄ‚îÄ show-hyperopt-results.sh  # Afficher r√©sultats
‚îú‚îÄ‚îÄ apply-best-params.sh      # Appliquer meilleurs param√®tres
‚îú‚îÄ‚îÄ test-backtest.sh          # Backtest rapide
‚îú‚îÄ‚îÄ run-backtest.sh           # Backtest standard
‚îî‚îÄ‚îÄ user_data/
    ‚îú‚îÄ‚îÄ strategies/           # Strat√©gies de trading
    ‚îÇ   ‚îú‚îÄ‚îÄ HyperoptWorking.py    # ‚≠ê Strat√©gie principale
    ‚îÇ   ‚îú‚îÄ‚îÄ HyperoptWorking.json  # Param√®tres optimis√©s
    ‚îÇ   ‚îú‚îÄ‚îÄ HyperoptOptimized.py  # Strat√©gie optimis√©e
    ‚îÇ   ‚îú‚îÄ‚îÄ HyperoptSimple.py     # Strat√©gie simple
    ‚îÇ   ‚îú‚îÄ‚îÄ HyperoptStrategy.py   # Strat√©gie de base
    ‚îÇ   ‚îî‚îÄ‚îÄ PowerTowerStrategy.py # Strat√©gie alternative
    ‚îú‚îÄ‚îÄ data/                 # Donn√©es historiques
    ‚îÇ   ‚îî‚îÄ‚îÄ binance/          # Donn√©es Binance (USDT/USDC)
    ‚îú‚îÄ‚îÄ backtest_results/     # R√©sultats backtest
    ‚îî‚îÄ‚îÄ hyperopt_results/     # R√©sultats hyperopt

## üîß D√©pannage

### Erreur Telegram Bot

Si vous voyez l'erreur `ExtBot is not properly initialized` :

```bash
# 1. V√©rifier que Telegram est d√©sactiv√© dans config.json
grep -A 5 '"telegram"' config.json

# 2. Si activ√©, le d√©sactiver
sed -i 's/"enabled": true/"enabled": false/' config.json

# 3. Red√©marrer FreqTrad
./stop-bot.sh
./start-bot.sh
```

### Interface Web Non Install√©e

Si vous voyez des erreurs li√©es √† l'interface web :

```bash
# Installer l'interface web
source venv/bin/activate
freqtrade install-ui

# Puis red√©marrer
./start-bot.sh
```

### Probl√®mes de Configuration

```bash
# V√©rifier la configuration
freqtrade --config config.json --strategy SampleStrategy --dry-run

# Tester une strat√©gie sp√©cifique
freqtrade --config config.json --strategy PowerTowerStrategy --dry-run
```

## üö® Avertissements

- **Toujours tester en mode dry run avant le trading live**
- **Ne jamais investir plus que ce que vous pouvez perdre**
- **Les performances pass√©es ne garantissent pas les r√©sultats futurs**
- **Gardez vos cl√©s API s√©curis√©es**
- **Surveillez r√©guli√®rement les logs pour d√©tecter les erreurs**
- **Installez TOUJOURS l'interface web avant d'utiliser les scripts de trading**
- **Utilisez HyperoptWorking pour de meilleures performances**
- **Optimisez r√©guli√®rement vos strat√©gies avec l'hyperopt**
- **Les strat√©gies actuelles ne sont pas rentables - testez avant utilisation**
- **Utilisez `apply-best-params.sh` pour appliquer les param√®tres optimis√©s**

## ÔøΩÔøΩ Documentation

- [Documentation FreqTrad](https://www.freqtrade.io/)
- [Guide des strat√©gies](https://www.freqtrade.io/en/latest/strategy-customization/)
- [Indicateurs techniques](https://www.freqtrade.io/en/latest/strategy-customization/#technical-indicators)
- [Interface Web FreqUI](https://github.com/freqtrade/freqtrade-ui)

## ü§ù Contribution

1. Fork le projet
2. Cr√©ez une branche pour votre fonctionnalit√©
3. Committez vos changements
4. Poussez vers la branche
5. Ouvrez une Pull Request

## ÔøΩÔøΩ Licence

Ce projet est sous licence MIT. Voir le fichier LICENSE pour plus de d√©tails.

---

**D√©velopp√© avec ‚ù§Ô∏è pour le trading algorithmique**
