# CypTrade - FreqTrad Configuration

Ce projet configure FreqTrad pour le trading algorithmique avec des strat√©gies personnalis√©es et une interface web compl√®te.

## üöÄ Installation Rapide

### Installation Locale (macOS/Linux)

```bash
# 1. Cloner le projet
git clone <repository-url>
cd cypTrade

# 2. Cr√©er l'environnement virtuel
python3 -m venv venv
source venv/bin/activate

# 3. Installer FreqTrad (sans utiliser /tmp)
mkdir -p ~/.pip-temp
export TMPDIR="$HOME/.pip-temp"
export TEMP="$HOME/.pip-temp"
export TMP="$HOME/.pip-temp"

pip install freqtrade --no-cache-dir

# 4. Installer l'interface web (OBLIGATOIRE)
freqtrade install-ui

# 5. Configurer les variables d'environnement
cp .env.example .env
# √âditer .env avec vos cl√©s API
```

### Installation Automatique

```bash
# Rendre le script ex√©cutable
chmod +x quick-install.sh

# Ex√©cuter l'installation
./quick-install.sh
```

## ‚ö†Ô∏è IMPORTANT - Ordre d'Installation

**L'interface web FreqUI DOIT √™tre install√©e avant d'utiliser les scripts de trading !**

1. **D'abord** : Installer l'interface web avec `freqtrade install-ui`
2. **Ensuite** : Utiliser `start-bot.sh` ou `stop-bot.sh` pour trader
3. **Optionnel** : Utiliser `start-webserver.sh` pour l'interface web uniquement

## ‚öôÔ∏è Configuration

### 1. Variables d'Environnement

Cr√©ez un fichier `.env` avec vos cl√©s API :

```env
# Binance API
BINANCE_API_KEY=your_api_key_here
BINANCE_SECRET=your_secret_here

# JWT Secret pour l'API
JWT_SECRET=your_jwt_secret_here

# Telegram Bot (optionnel)
TELEGRAM_TOKEN=your_telegram_token
TELEGRAM_CHAT_ID=your_chat_id
```

### 2. Configuration Principale

Le fichier `config.json` est pr√©-configur√© avec :

- **√âchange** : Binance
- **Devise de base** : USDC
- **Mode** : Dry Run (simulation)
- **Timeframe** : 5 minutes
- **Paires** : BTC/USDC, ETH/USDC, BNB/USDC, ADA/USDC, SOL/USDC, DOT/USDC, LINK/USDC, MATIC/USDC
- **API Server** : Activ√© sur le port 8080
- **Interface Web** : FreqUI int√©gr√©e

## üéØ Strat√©gies Disponibles

### 1. HyperoptWorking ‚≠ê (Recommand√©e)

**Strat√©gie optimis√©e pour l'hyperopt** - La plus performante du projet :

- **Param√®tres optimisables** : RSI, EMA, Volume, MACD
- **Hyperopt int√©gr√©** : Optimisation automatique des param√®tres
- **Performance** : 175 trades en 60 jours, Win Rate 31.4%
- **G√©n√®re des trades** : Contrairement aux autres strat√©gies simples
- **Facile √† utiliser** : Scripts d'optimisation pr√™ts √† l'emploi

**Utilisation :**

```bash
# Test rapide (10 epochs)
./test-hyperopt.sh

# Hyperopt standard (100 epochs)
./run-hyperopt.sh

# Hyperopt complet (500 epochs)
./run-full-hyperopt.sh

# Voir les r√©sultats
./show-hyperopt-results.sh

# Appliquer les meilleurs param√®tres
./apply-best-params.sh
```

### 2. PowerTowerStrategy

Strat√©gie avanc√©e avec :

- Indicateurs multiples
- Gestion des risques am√©lior√©e
- Support des timeframes informatifs
- V√©rifications de s√©curit√© robustes

### 3. MultiMAStrategy

Strat√©gie multi-timeframe utilisant :

- Moyennes mobiles exponentielles sur plusieurs timeframes
- Analyse de tendance sur 1h, 4h, 1d
- Gestion des risques adaptative

### 4. Autres Strat√©gies

- **SampleStrategy** : Strat√©gie d'exemple basique
- **BalancedAdvancedStrategy** : Strat√©gie √©quilibr√©e avec indicateurs avanc√©s
- **BandtasticStrategy** : Bas√©e sur les bandes de Bollinger (corrig√©e)
- **SimpleTestStrategy** : Strat√©gie de test simple

## üöÄ Optimisation des Strat√©gies

### Scripts d'Hyperopt

| Script | Fonction | Epochs | Dur√©e | Usage |
|--------|----------|--------|-------|-------|
| `test-hyperopt.sh` | Test rapide | 10 | ~2 min | Validation |
| `run-hyperopt.sh` | Optimisation standard | 100 | ~20 min | Optimisation |
| `run-full-hyperopt.sh` | Optimisation compl√®te | 500 | ~2h | Optimisation avanc√©e |
| `show-hyperopt-results.sh` | Affichage des r√©sultats | - | - | Analyse |
| `apply-best-params.sh` | Application des param√®tres | - | - | D√©ploiement |

### Exemple d'Optimisation

```bash
# 1. Test rapide
./test-hyperopt.sh

# 2. Voir les r√©sultats
./show-hyperopt-results.sh

# 3. Optimisation compl√®te
./run-full-hyperopt.sh

# 4. Appliquer les meilleurs param√®tres
./apply-best-params.sh
```

### Exemple de commande

```bash
freqtrade hyperopt --hyperopt-loss MultiMetricHyperOptLoss \
  --strategy HyperoptWorking \
  --timerange 20240101-20241201 \
  -e 500 \
  --spaces buy sell roi \
  --min-trades 50
```

## üñ•Ô∏è Interface Web

### D√©marrage de l'Interface

```bash
# D√©marrer FreqTrad avec l'interface web
./start-webserver.sh

# Ou manuellement
source venv/bin/activate
freqtrade trade --config config.json --strategy SampleStrategy
```

### Acc√®s √† l'Interface

- **URL** : <http://localhost:8080>
- **Identifiants** :
  - Utilisateur : `admin`
  - Mot de passe : `NouveauMotDePasse2025!`

### Fonctionnalit√©s de l'Interface

- üìä **Dashboard** : Vue d'ensemble du trading
- üìà **Graphiques** : Analyse technique en temps r√©el
- üîÑ **Backtesting** : Test des strat√©gies sur donn√©es historiques
- ‚öôÔ∏è **Configuration** : Gestion des param√®tres
- üì± **Notifications** : Alertes et rapports

## ü§ñ Gestion du Bot

### ‚ö†Ô∏è PR√âREQUIS OBLIGATOIRE

**Avant d'utiliser les scripts de trading, vous DEVEZ installer l'interface web :**

```bash
# 1. Activer l'environnement virtuel
source venv/bin/activate

# 2. Installer l'interface web FreqUI (OBLIGATOIRE)
freqtrade install-ui

# 3. Maintenant vous pouvez utiliser les scripts de trading
```

### Scripts de Contr√¥le du Bot

#### D√©marrage du Bot

```bash
# Mode interactif (recommand√©)
./start-bot.sh

# Mode avec arguments
./start-bot.sh SampleStrategy dry-run
./start-bot.sh PowerTowerStrategy live

# Aide
./start-bot.sh --help
```

**Fonctionnalit√©s du script `start-bot.sh` :**

- üéØ **Choix de strat√©gie** : Liste automatiquement toutes les strat√©gies disponibles
- üîÑ **Choix de mode** : Dry-run (simulation) ou Live (trading r√©el)
- ‚öôÔ∏è **Configuration dynamique** : Cr√©e une config sp√©cifique pour chaque combinaison
- üõ°Ô∏è **S√©curit√©** : Avertissements pour le mode live
- üîç **V√©rifications** : Contr√¥les complets avant d√©marrage

#### Arr√™t du Bot

```bash
# Arr√™t normal
./stop-bot.sh

# Arr√™t forc√©
./stop-bot.sh --force

# Voir le statut
./stop-bot.sh --status

# Voir les logs
./stop-bot.sh --logs

# Aide
./stop-bot.sh --help
```

**Fonctionnalit√©s du script `stop-bot.sh` :**

- üõë **Arr√™t propre** : Utilise SIGTERM par d√©faut, SIGKILL si forc√©
- üìä **Statut** : Affiche les processus FreqTrad en cours
- üìã **Logs** : Affiche les derniers logs
- üßπ **Nettoyage** : Supprime les fichiers temporaires et de verrouillage
- üìà **R√©sum√©** : Affiche un r√©sum√© de l'√©tat du syst√®me

### Exemples d'Utilisation

```bash
# 1. D'ABORD : Installer l'interface web
source venv/bin/activate
freqtrade install-ui

# 2. ENSUITE : Utiliser les scripts de trading
./start-bot.sh
# Choisir la strat√©gie et le mode via l'interface

# Ou d√©marrage direct
./start-bot.sh SampleStrategy dry-run
./start-bot.sh PowerTowerStrategy live

# V√©rifier le statut
./stop-bot.sh --status

# Arr√™ter le bot
./stop-bot.sh

# Voir les logs
./stop-bot.sh --logs
```

## Scripts de Gestion

### Scripts Disponibles

#### Scripts de Trading

- **`start-bot.sh`** : D√©marre FreqTrad avec choix de strat√©gie et mode
- **`stop-bot.sh`** : Arr√™te FreqTrad proprement
- **`start-webserver.sh`** : D√©marre FreqTrad avec l'interface web
- **`restart-server.sh`** : Red√©marre le serveur FreqTrad

#### Scripts d'Optimisation

- **`test-hyperopt.sh`** : Test rapide de l'hyperopt (10 epochs)
- **`run-hyperopt.sh`** : Hyperopt standard (100 epochs)
- **`run-full-hyperopt.sh`** : Hyperopt complet (500 epochs)
- **`show-hyperopt-results.sh`** : Affiche les r√©sultats d'optimisation
- **`apply-best-params.sh`** : Applique les meilleurs param√®tres trouv√©s

#### Scripts de Diagnostic

- **`diagnose-trading.sh`** : Diagnostic complet du syst√®me de trading
- **`monitor-trades.sh`** : Surveillance des trades en temps r√©el

#### Scripts de Configuration

- **`secure-config.sh`** : S√©curise la configuration
- **`quick-install.sh`** : Installation rapide et automatique
- **`generate-password.sh`** : G√©n√®re des mots de passe s√©curis√©s
- **`install-hyperopt-server.sh`** : Installation sur serveur Debian

### Utilisation des Scripts

```bash
# D√©marrer le bot avec choix interactif
./start-bot.sh

# D√©marrer le serveur web
./start-webserver.sh

# Red√©marrer le serveur
./restart-server.sh

# Arr√™ter le bot
./stop-bot.sh

# S√©curiser la configuration
./secure-config.sh

# Voir les logs
tail -f user_data/logs/freqtrade.log
```

## üìä Utilisation

### Mode Dry Run (Recommand√© pour d√©buter)

```bash
# D√©marrer en mode simulation
source venv/bin/activate
freqtrade trade --config config.json --strategy SampleStrategy
```

### Backtesting

```bash
# Tester une strat√©gie sur des donn√©es historiques
freqtrade backtesting \
    --config config.json \
    --strategy SampleStrategy \
    --timerange 20240901-20240910
```

### Hyperopt (Optimisation des param√®tres)

#### Utilisation des Scripts (Recommand√©)

```bash
# Test rapide (10 epochs)
./test-hyperopt.sh

# Optimisation standard (100 epochs)
./run-hyperopt.sh

# Optimisation compl√®te (500 epochs)
./run-full-hyperopt.sh

# Voir les r√©sultats
./show-hyperopt-results.sh

# Appliquer les meilleurs param√®tres
./apply-best-params.sh
```

#### Utilisation Manuelle

```bash
# Optimiser les param√®tres d'une strat√©gie
freqtrade hyperopt \
    --config config-usdt.json \
    --strategy HyperoptWorking \
    --hyperopt-loss SharpeHyperOptLoss \
    --epochs 100 \
    --spaces buy sell protection
```

## üîí S√©curit√©

### Configuration S√©curis√©e

1. **Changer le mot de passe par d√©faut** :

   ```bash
   ./generate-password.sh
   # Puis √©diter config.json avec le nouveau mot de passe
   ```

2. **S√©curiser l'acc√®s API** :

   ```bash
   ./secure-config.sh
   ```

3. **Variables d'environnement** :
   - Ne jamais commiter le fichier `.env`
   - Utiliser des cl√©s API avec permissions limit√©es
   - Changer le JWT secret par d√©faut

### Acc√®s Restreint

- **Local uniquement** : Changer `listen_ip_address` √† `"127.0.0.1"` dans `config.json`
- **Authentification** : Toujours activ√©e avec nom d'utilisateur et mot de passe
- **HTTPS** : Recommand√© pour la production

## üì± Notifications Telegram

### Configuration

1. Cr√©er un bot Telegram avec @BotFather
2. Ajouter le token dans `.env`
3. Activer Telegram dans `config.json` :

```json
"telegram": {
    "enabled": true,
    "token": "${TELEGRAM_TOKEN}",
    "chat_id": "${TELEGRAM_CHAT_ID}"
}
```

### Commandes Disponibles

- `/daily` - Performance du jour
- `/profit` - Profits actuels
- `/balance` - Solde du portefeuille
- `/trades` - Liste des trades r√©cents
- `/stats` - Statistiques de trading
- `/status` - Statut du bot

## üõ†Ô∏è D√©veloppement

### Cr√©er une Nouvelle Strat√©gie

1. Copier `SampleStrategy.py` vers un nouveau fichier
2. Renommer la classe
3. Modifier les param√®tres selon vos besoins
4. Tester avec le mode dry run

### Structure du Projet

cypTrade/
‚îú‚îÄ‚îÄ config.json # Configuration principale (USDC)
‚îú‚îÄ‚îÄ config-usdt.json # Configuration USDT
‚îú‚îÄ‚îÄ requirements.txt # D√©pendances Python
‚îú‚îÄ‚îÄ .env # Variables d'environnement
‚îú‚îÄ‚îÄ README.md # Ce fichier
‚îú‚îÄ‚îÄ start-webserver.sh # Script de d√©marrage
‚îú‚îÄ‚îÄ restart-server.sh # Script de red√©marrage
‚îú‚îÄ‚îÄ secure-config.sh # Script de s√©curisation
‚îú‚îÄ‚îÄ quick-install.sh # Installation rapide
‚îú‚îÄ‚îÄ generate-password.sh # G√©n√©ration de mots de passe
‚îú‚îÄ‚îÄ test-hyperopt.sh # Test hyperopt rapide
‚îú‚îÄ‚îÄ run-hyperopt.sh # Hyperopt standard
‚îú‚îÄ‚îÄ run-full-hyperopt.sh # Hyperopt complet
‚îú‚îÄ‚îÄ show-hyperopt-results.sh # Affichage des r√©sultats
‚îú‚îÄ‚îÄ apply-best-params.sh # Application des param√®tres
‚îú‚îÄ‚îÄ diagnose-trading.sh # Diagnostic du syst√®me
‚îú‚îÄ‚îÄ monitor-trades.sh # Surveillance des trades
‚îú‚îÄ‚îÄ install-hyperopt-server.sh # Installation serveur
‚îî‚îÄ‚îÄ user_data/
    ‚îú‚îÄ‚îÄ logs/ # Logs FreqTrad
    ‚îú‚îÄ‚îÄ data/ # Donn√©es historiques
    ‚îú‚îÄ‚îÄ hyperopt_results/ # R√©sultats d'optimisation
    ‚îî‚îÄ‚îÄ strategies/ # Strat√©gies de trading
        ‚îú‚îÄ‚îÄ HyperoptWorking.py # ‚≠ê Strat√©gie principale
        ‚îú‚îÄ‚îÄ PowerTowerStrategy.py
        ‚îú‚îÄ‚îÄ MultiMAStrategy.py
        ‚îú‚îÄ‚îÄ SampleStrategy.py
        ‚îî‚îÄ‚îÄ ...

## üîß D√©pannage

### Erreur Telegram Bot

Si vous voyez l'erreur `ExtBot is not properly initialized` :

```bash
# 1. V√©rifier que Telegram est d√©sactiv√© dans config.json
grep -A 5 '"telegram"' config.json

# 2. Si activ√©, le d√©sactiver
sed -i 's/"enabled": true/"enabled": false/' config.json

# 3. Red√©marrer FreqTrad
./stop-bot.sh
./start-bot.sh
```

### Interface Web Non Install√©e

Si vous voyez des erreurs li√©es √† l'interface web :

```bash
# Installer l'interface web
source venv/bin/activate
freqtrade install-ui

# Puis red√©marrer
./start-bot.sh
```

### Probl√®mes de Configuration

```bash
# V√©rifier la configuration
freqtrade --config config.json --strategy SampleStrategy --dry-run

# Tester une strat√©gie sp√©cifique
freqtrade --config config.json --strategy PowerTowerStrategy --dry-run
```

## üö® Avertissements

- **Toujours tester en mode dry run avant le trading live**
- **Ne jamais investir plus que ce que vous pouvez perdre**
- **Les performances pass√©es ne garantissent pas les r√©sultats futurs**
- **Gardez vos cl√©s API s√©curis√©es**
- **Surveillez r√©guli√®rement les logs pour d√©tecter les erreurs**
- **Installez TOUJOURS l'interface web avant d'utiliser les scripts de trading**
- **Utilisez HyperoptWorking pour de meilleures performances**
- **Optimisez r√©guli√®rement vos strat√©gies avec l'hyperopt**

## ÔøΩÔøΩ Documentation

- [Documentation FreqTrad](https://www.freqtrade.io/)
- [Guide des strat√©gies](https://www.freqtrade.io/en/latest/strategy-customization/)
- [Indicateurs techniques](https://www.freqtrade.io/en/latest/strategy-customization/#technical-indicators)
- [Interface Web FreqUI](https://github.com/freqtrade/freqtrade-ui)

## ü§ù Contribution

1. Fork le projet
2. Cr√©ez une branche pour votre fonctionnalit√©
3. Committez vos changements
4. Poussez vers la branche
5. Ouvrez une Pull Request

## ÔøΩÔøΩ Licence

Ce projet est sous licence MIT. Voir le fichier LICENSE pour plus de d√©tails.

---

**D√©velopp√© avec ‚ù§Ô∏è pour le trading algorithmique**
